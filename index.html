<!DOCTYPE html>
<html>
  <head>
    <style>
      .hidden {
        display: none;
      }
	</style>
	<script src = "index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
  </head>
  <body>
    <h1>Welcome To My Text Twister</h1>
    <p id = "instructions">To play all you need to do is enter in all the word combinations you can think of in the field below based off of the randomly generated characters. Good Luck! </p>
    <button id = "grabRack"> Click here to grab a randomly generated rack</button>
    <p id = "randomWord">Random Rack Generated: </p>
	<!-- After this is where user enters their guess    -->
    <form id="word" > Enter a word: <input type="text" name="fname">
    <input type="button" value="Submit" onclick="myFunction(0)">
  	</form>
    </input>

<!-- Lists the correct words and incorrect guesses -->
<p id = "correct"> Correct Words: </p>
<p id = "incorrect"> Incorrect Guesses: </p>
<ul id="correctWords"></ul>
<ul id="incorrectGuesses"></ul>
  </body>

  <script>
    $(document).ready(function(){
      
      let showRacks = function(racks){
        $("#bingos").html('');
        racks.map(rack=>{
          $("#bingos").append(`<li>${rack.rack}: <span class="answer hidden">${rack.words}</span></li>`);
        });
        $("#bingos li").on("click", function(evt){
          $(evt.currentTarget).find(".answer").toggleClass("hidden");
        });
      }
      
      $("#grabmore").on("click", function(){
        $.ajax({
            method: "GET",
            url: "api.php",
            success: data=>{ showRacks(data)}
        });
      });
	});
	var getRandWord = function(rack){
  	var xhr = new XMLHttpRequest();
  	xhr.onload = function(){
    if (this.status == 200){
      randomWord.innerHTML = this.response;
   		}
 	};
	xhr.open("GET", "https://evans-text-twister.herokuapp.com/");
	xhr.send();
		console.log('click');
	};
	document.getElementById("grabRack").addEventListener('click', getRandWord);
  </script>
</html>